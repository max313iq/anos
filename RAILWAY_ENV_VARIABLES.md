# Railway Environment Variables

Copy and paste these into Railway Dashboard → Your Service → Variables tab

## Required Variables

```bash
# Database Configuration
DATABASE_URL=postgresql://postgres:ewJimjnmajcUjpxXDnjEUuOJoWEqiliE@postgres.railway.internal:5432/railway

# Redis Configuration (for caching)
REDIS_HOST=redis.railway.internal
REDIS_PORT=6379
REDIS_PASSWORD=<auto-generated>

# LiteLLM Core Configuration
LITELLM_MODE=PRODUCTION
LITELLM_MASTER_KEY=sk-1234
LITELLM_SALT_KEY=sk-CHANGE_THIS_TO_RANDOM_STRING_NEVER_CHANGE_AFTER_SET

# Database Settings
STORE_MODEL_IN_DB=True
STORE_PROMPTS_IN_SPEND_LOGS=True

# Server Configuration
PORT=4000

# Proxy Base URL (remove or set to Railway URL)
# Option 1: Remove this variable for auto-detection (RECOMMENDED)
# Option 2: Set to your Railway URL
PROXY_BASE_URL=https://anos-production.up.railway.app
```

## Optional Variables (Performance & Features)

```bash
# Database Connection Pool
DATABASE_CONNECTION_POOL_LIMIT=10
DATABASE_CONNECTION_TIMEOUT=60

# Logging
SET_VERBOSE=False

# UI Configuration
UI_USERNAME=admin
UI_PASSWORD=<set-your-password>

# Rate Limiting
LITELLM_RATE_LIMIT_ENABLED=True

# Caching TTL (seconds)
CACHE_TTL=600
```

## Important Notes

### LITELLM_SALT_KEY
⚠️ **CRITICAL**: Generate a secure random string for `LITELLM_SALT_KEY` and **NEVER CHANGE IT** after setting it. This key encrypts credentials in the database. If you change it, you'll lose access to all stored API keys.

Generate a secure key:
```bash
openssl rand -hex 32
```

Then use it like:
```bash
LITELLM_SALT_KEY=sk-<your-generated-hex-string>
```

### PROXY_BASE_URL
This was causing the SSO redirect issue. You have two options:
1. **Delete this variable** (recommended) - LiteLLM will auto-detect the URL
2. **Set it to your Railway URL** - `https://anos-production.up.railway.app`

### Redis Password
Replace `<auto-generated>` with the actual Redis password from your Railway Redis service variables.

### Database URL
The internal Railway URL (`postgres.railway.internal`) only works within Railway's private network. This is correct and more performant than using the public URL.

## How to Add Variables in Railway

1. Go to Railway Dashboard
2. Select your `anos-production` project
3. Click on your service
4. Go to **Variables** tab
5. Click **+ New Variable**
6. Add each variable one by one
7. Railway will automatically redeploy after you save

## Verification

After adding variables and redeployment completes:
1. Check `/health` endpoint: `https://anos-production.up.railway.app/health`
2. Check UI loads: `https://anos-production.up.railway.app/ui/`
3. No more 500 errors from `/v2/model/info`
4. Red neon theme should be visible
5. SSO redirects should work correctly
